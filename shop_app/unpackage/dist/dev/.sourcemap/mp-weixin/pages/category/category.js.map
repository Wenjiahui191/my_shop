{"version":3,"file":"category.js","sources":["pages/category/category.vue","../../../application/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY2F0ZWdvcnkvY2F0ZWdvcnkudnVl"],"sourcesContent":["<template>\r\n  <view class=\"container\">\r\n    <view class=\"category-list\">\r\n      <view \r\n        class=\"category-item\" \r\n        :class=\"{ active: currentId === item.id }\" \r\n        v-for=\"item in categories\" \r\n        :key=\"item.id\"\r\n        @click=\"selectCategory(item.id)\"\r\n      >\r\n        {{ item.name }}\r\n      </view>\r\n    </view>\r\n    <view class=\"product-list\">\r\n      <view class=\"product-item\" v-for=\"item in products\" :key=\"item.id\" @click=\"goToDetail(item.id)\">\r\n        <image class=\"product-img\" :src=\"filePath + (item.image_url || '/uploads/logo.png')\" mode=\"aspectFill\"></image>\r\n        <view class=\"product-info\">\r\n          <view class=\"product-name\">{{ item.name }}</view>\r\n          <view class=\"product-price\">¥{{ item.price }}</view>\r\n        </view>\r\n      </view>\r\n      <view v-if=\"products.length === 0\" class=\"empty\">暂无商品</view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { getCategories, getProducts } from '@/api/product';\r\nimport { filePath } from '@/utils/request';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      categories: [],\r\n      currentId: null,\r\n      products: [],\r\n      filePath\r\n    };\r\n  },\r\n  onLoad() {\r\n    this.loadCategories();\r\n  },\r\n  methods: {\r\n    async loadCategories() {\r\n      try {\r\n        const res = await getCategories();\r\n        this.categories = res.data;\r\n        if (this.categories.length > 0) {\r\n          this.selectCategory(this.categories[0].id);\r\n        }\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    },\r\n    async selectCategory(id) {\r\n      this.currentId = id;\r\n      try {\r\n        const res = await getProducts({ category_id: id, page: 1, limit: 100 });\r\n        this.products = res.data;\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    },\r\n    goToDetail(id) {\r\n      uni.navigateTo({ url: `/pages/product/detail?id=${id}` });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n.container { display: flex; height: 100vh; }\r\n.category-list { width: 100px; background-color: #f8f8f8; height: 100%; overflow-y: auto; }\r\n.category-item { padding: 15px 10px; text-align: center; font-size: 14px; border-bottom: 1px solid #eee; }\r\n.category-item.active { background-color: #fff; color: #3cc51f; border-left: 3px solid #3cc51f; }\r\n.product-list { flex: 1; padding: 10px; overflow-y: auto; }\r\n.product-item { display: flex; margin-bottom: 10px; background-color: #fff; padding: 10px; border-radius: 5px; }\r\n.product-img { width: 80px; height: 80px; margin-right: 10px; border-radius: 5px; }\r\n.product-info { flex: 1; display: flex; flex-direction: column; justify-content: space-between; }\r\n.product-name { font-size: 14px; }\r\n.product-price { color: #ff0000; font-weight: bold; }\r\n.empty { text-align: center; margin-top: 50px; color: #999; }\r\n</style>\r\n","import MiniProgramPage from 'D:/projects/my_shop/shop_app/pages/category/category.vue'\nwx.createPage(MiniProgramPage)"],"names":["filePath","getCategories","uni","getProducts"],"mappings":";;;;AA8BA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,YAAY,CAAE;AAAA,MACd,WAAW;AAAA,MACX,UAAU,CAAE;AAAA,MACZ,UAAAA,cAAO;AAAA;EAEV;AAAA,EACD,SAAS;AACP,SAAK,eAAc;AAAA,EACpB;AAAA,EACD,SAAS;AAAA,IACP,MAAM,iBAAiB;AACrB,UAAI;AACF,cAAM,MAAM,MAAMC,YAAAA;AAClB,aAAK,aAAa,IAAI;AACtB,YAAI,KAAK,WAAW,SAAS,GAAG;AAC9B,eAAK,eAAe,KAAK,WAAW,CAAC,EAAE,EAAE;AAAA,QAC3C;AAAA,MACA,SAAO,OAAO;AACdC,sBAAAA,MAAc,MAAA,SAAA,qCAAA,KAAK;AAAA,MACrB;AAAA,IACD;AAAA,IACD,MAAM,eAAe,IAAI;AACvB,WAAK,YAAY;AACjB,UAAI;AACF,cAAM,MAAM,MAAMC,wBAAY,EAAE,aAAa,IAAI,MAAM,GAAG,OAAO,IAAI,CAAC;AACtE,aAAK,WAAW,IAAI;AAAA,MACpB,SAAO,OAAO;AACdD,sBAAAA,MAAc,MAAA,SAAA,qCAAA,KAAK;AAAA,MACrB;AAAA,IACD;AAAA,IACD,WAAW,IAAI;AACbA,oBAAG,MAAC,WAAW,EAAE,KAAK,4BAA4B,EAAE,GAAG,CAAC;AAAA,IAC1D;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;AClEA,GAAG,WAAW,eAAe;"}