{"version":3,"file":"list.js","sources":["pages/address/list.vue","../../../application/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYWRkcmVzcy9saXN0LnZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"container\">\r\n    <!-- 地址列表 -->\r\n    <view class=\"address-list\">\r\n      <view v-if=\"addresses.length === 0\" class=\"empty-state\">\r\n        <text>暂无收货地址</text>\r\n      </view>\r\n      \r\n      <view v-for=\"item in addresses\" :key=\"item.id\" class=\"address-item\">\r\n        <view class=\"address-header\">\r\n          <view class=\"address-name\">{{ item.name }}</view>\r\n          <view v-if=\"item.is_default\" class=\"default-badge\">默认</view>\r\n        </view>\r\n        <view class=\"address-detail\">\r\n          {{ item.province }}{{ item.city }}{{ item.district }}{{ item.detail }}\r\n        </view>\r\n        <view class=\"address-phone\">{{ item.phone }}</view>\r\n        <view class=\"address-actions\">\r\n          <text class=\"action-btn edit-btn\" @click=\"goToEdit(item.id)\">编辑</text>\r\n          <text class=\"action-btn delete-btn\" @click=\"handleDelete(item.id)\">删除</text>\r\n          <text v-if=\"!item.is_default\" class=\"action-btn set-default-btn\" @click=\"setDefault(item.id)\">设为默认</text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 添加地址按钮 -->\r\n    <view class=\"footer\">\r\n      <button class=\"add-address-btn\" @click=\"goToAdd\">+ 新增收货地址</button>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { getAddresses, deleteAddress, updateAddress } from '../../api/address';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      addresses: []\r\n    };\r\n  },\r\n  onShow() {\r\n    this.loadAddresses();\r\n  },\r\n  methods: {\r\n    async loadAddresses() {\r\n      try {\r\n        const res = await getAddresses();\r\n        this.addresses = res.data;\r\n      } catch (error) {\r\n        uni.showToast({\r\n          title: '加载地址失败',\r\n          icon: 'none'\r\n        });\r\n      }\r\n    },\r\n    goToAdd() {\r\n      uni.navigateTo({ url: '/pages/address/edit' });\r\n    },\r\n    goToEdit(id) {\r\n      uni.navigateTo({ url: `/pages/address/edit?id=${id}` });\r\n    },\r\n    async handleDelete(id) {\r\n      uni.showModal({\r\n        title: '提示',\r\n        content: '确定要删除此地址吗？',\r\n        success: async (res) => {\r\n          if (res.confirm) {\r\n            try {\r\n              await deleteAddress(id);\r\n              uni.showToast({\r\n                title: '删除成功',\r\n                icon: 'success'\r\n              });\r\n              this.loadAddresses();\r\n            } catch (error) {\r\n              uni.showToast({\r\n                title: '删除失败',\r\n                icon: 'none'\r\n              });\r\n            }\r\n          }\r\n        }\r\n      });\r\n    },\r\n    async setDefault(id) {\r\n      try {\r\n        const address = this.addresses.find(a => a.id === id);\r\n        await updateAddress(id, {\r\n          name: address.name,\r\n          phone: address.phone,\r\n          province: address.province,\r\n          city: address.city,\r\n          district: address.district,\r\n          detail: address.detail,\r\n          is_default: true\r\n        });\r\n        uni.showToast({\r\n          title: '已设为默认地址',\r\n          icon: 'success'\r\n        });\r\n        this.loadAddresses();\r\n      } catch (error) {\r\n        uni.showToast({\r\n          title: '设置失败',\r\n          icon: 'none'\r\n        });\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  min-height: 100vh;\r\n  background-color: #f8f8f8;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.address-list {\r\n  flex: 1;\r\n  padding: 10px 0;\r\n}\r\n\r\n.empty-state {\r\n  text-align: center;\r\n  padding: 60px 20px;\r\n  color: #999;\r\n  font-size: 16px;\r\n}\r\n\r\n.address-item {\r\n  margin: 10px 10px;\r\n  padding: 15px;\r\n  background-color: #fff;\r\n  border-radius: 8px;\r\n}\r\n\r\n.address-header {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.address-name {\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  flex: 1;\r\n}\r\n\r\n.default-badge {\r\n  background-color: #3cc51f;\r\n  color: #fff;\r\n  font-size: 12px;\r\n  padding: 2px 8px;\r\n  border-radius: 4px;\r\n}\r\n\r\n.address-detail {\r\n  font-size: 14px;\r\n  color: #666;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.address-phone {\r\n  font-size: 14px;\r\n  color: #666;\r\n  margin-bottom: 12px;\r\n}\r\n\r\n.address-actions {\r\n  display: flex;\r\n  gap: 10px;\r\n  border-top: 1px solid #eee;\r\n  padding-top: 12px;\r\n}\r\n\r\n.action-btn {\r\n  flex: 1;\r\n  text-align: center;\r\n  padding: 8px;\r\n  border-radius: 4px;\r\n  font-size: 14px;\r\n}\r\n\r\n.edit-btn {\r\n  color: #3cc51f;\r\n  border: 1px solid #3cc51f;\r\n}\r\n\r\n.delete-btn {\r\n  color: #f56;\r\n  border: 1px solid #f56;\r\n}\r\n\r\n.set-default-btn {\r\n  color: #07c;\r\n  border: 1px solid #07c;\r\n}\r\n\r\n.footer {\r\n  padding: 15px 10px;\r\n  background-color: #fff;\r\n}\r\n\r\n.add-address-btn {\r\n  width: 100%;\r\n  padding: 15px;\r\n  background-color: #3cc51f;\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 6px;\r\n  font-size: 16px;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'D:/projects/my_shop/shop_app/pages/address/list.vue'\nwx.createPage(MiniProgramPage)"],"names":["getAddresses","uni","deleteAddress","updateAddress"],"mappings":";;;AAmCA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,WAAW,CAAC;AAAA;EAEf;AAAA,EACD,SAAS;AACP,SAAK,cAAa;AAAA,EACnB;AAAA,EACD,SAAS;AAAA,IACP,MAAM,gBAAgB;AACpB,UAAI;AACF,cAAM,MAAM,MAAMA,YAAAA;AAClB,aAAK,YAAY,IAAI;AAAA,MACrB,SAAO,OAAO;AACdC,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACR,CAAC;AAAA,MACH;AAAA,IACD;AAAA,IACD,UAAU;AACRA,oBAAAA,MAAI,WAAW,EAAE,KAAK,sBAAuB,CAAA;AAAA,IAC9C;AAAA,IACD,SAAS,IAAI;AACXA,oBAAG,MAAC,WAAW,EAAE,KAAK,0BAA0B,EAAE,GAAG,CAAC;AAAA,IACvD;AAAA,IACD,MAAM,aAAa,IAAI;AACrBA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,OAAO,QAAQ;AACtB,cAAI,IAAI,SAAS;AACf,gBAAI;AACF,oBAAMC,YAAAA,cAAc,EAAE;AACtBD,4BAAAA,MAAI,UAAU;AAAA,gBACZ,OAAO;AAAA,gBACP,MAAM;AAAA,cACR,CAAC;AACD,mBAAK,cAAa;AAAA,YAClB,SAAO,OAAO;AACdA,4BAAAA,MAAI,UAAU;AAAA,gBACZ,OAAO;AAAA,gBACP,MAAM;AAAA,cACR,CAAC;AAAA,YACH;AAAA,UACF;AAAA,QACF;AAAA,MACF,CAAC;AAAA,IACF;AAAA,IACD,MAAM,WAAW,IAAI;AACnB,UAAI;AACF,cAAM,UAAU,KAAK,UAAU,KAAK,OAAK,EAAE,OAAO,EAAE;AACpD,cAAME,YAAAA,cAAc,IAAI;AAAA,UACtB,MAAM,QAAQ;AAAA,UACd,OAAO,QAAQ;AAAA,UACf,UAAU,QAAQ;AAAA,UAClB,MAAM,QAAQ;AAAA,UACd,UAAU,QAAQ;AAAA,UAClB,QAAQ,QAAQ;AAAA,UAChB,YAAY;AAAA,QACd,CAAC;AACDF,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACR,CAAC;AACD,aAAK,cAAa;AAAA,MAClB,SAAO,OAAO;AACdA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACR,CAAC;AAAA,MACH;AAAA,IACF;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7GA,GAAG,WAAW,eAAe;"}