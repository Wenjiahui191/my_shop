{"version":3,"file":"index.js","sources":["pages/index/index.vue","../../../application/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<template>\r\n  <view class=\"container\">\r\n    <view class=\"search-bar\">\r\n      <input class=\"search-input\" v-model=\"keyword\" placeholder=\"搜索商品\" @confirm=\"onSearch\" />\r\n    </view>\r\n    <view class=\"product-list\">\r\n      <view class=\"product-item\" v-for=\"item in products\" :key=\"item.id\" @click=\"goToDetail(item.id)\">\r\n        <image class=\"product-img\" :src=\"filePath + (item.image_url || '/uploads/logo.png')\" mode=\"aspectFill\"></image>\r\n        <view class=\"product-info\">\r\n          <view class=\"product-name\">{{ item.name }}</view>\r\n          <view class=\"product-price\">¥{{ item.price }}</view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    <view class=\"loading\" v-if=\"loading\">加载中...</view>\r\n    <view class=\"no-more\" v-if=\"!hasMore\">没有更多了</view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { getProducts } from '@/api/product';\r\nimport { filePath } from '@/utils/request';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      products: [],\r\n      page: 1,\r\n      limit: 10,\r\n      keyword: '',\r\n      loading: false,\r\n      hasMore: true,\r\n\t  filePath\r\n    };\r\n  },\r\n  onShow() {\r\n    this.loadProducts();\r\n  },\r\n  onReachBottom() {\r\n    if (this.hasMore && !this.loading) {\r\n      this.page++;\r\n      this.loadProducts();\r\n    }\r\n  },\r\n  methods: {\r\n    async loadProducts() {\r\n      this.loading = true;\r\n      try {\r\n        const res = await getProducts({\r\n          page: this.page,\r\n          limit: this.limit,\r\n          search: this.keyword\r\n        });\r\n        if (this.page === 1) {\r\n          this.products = res.data;\r\n        } else {\r\n          this.products = [...this.products, ...res.data];\r\n        }\r\n        this.hasMore = this.products.length < res.pagination.total;\r\n      } catch (error) {\r\n        console.error(error);\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n    onSearch() {\r\n      this.page = 1;\r\n      this.hasMore = true;\r\n      this.loadProducts();\r\n    },\r\n    goToDetail(id) {\r\n      uni.navigateTo({ url: `/pages/product/detail?id=${id}` });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n.container { padding: 10px; background-color: #f8f8f8; min-height: 100vh; }\r\n.search-bar { padding: 10px; background-color: #fff; margin-bottom: 10px; border-radius: 5px; }\r\n.search-input { width: 100%; }\r\n.product-list { display: flex; flex-wrap: wrap; justify-content: space-between; }\r\n.product-item { width: 48%; background-color: #fff; margin-bottom: 10px; border-radius: 5px; overflow: hidden; }\r\n.product-img { width: 100%; height: 150px; }\r\n.product-info { padding: 10px; }\r\n.product-name { font-size: 14px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; margin-bottom: 5px; }\r\n.product-price { color: #ff0000; font-weight: bold; }\r\n.loading, .no-more { text-align: center; padding: 10px; color: #999; }\r\n</style>\t","import MiniProgramPage from 'D:/projects/my_shop/shop_app/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["filePath","getProducts","uni"],"mappings":";;;;AAuBA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,UAAU,CAAE;AAAA,MACZ,MAAM;AAAA,MACN,OAAO;AAAA,MACP,SAAS;AAAA,MACT,SAAS;AAAA,MACT,SAAS;AAAA,MACZ,UAAAA,cAAO;AAAA;EAEP;AAAA,EACD,SAAS;AACP,SAAK,aAAY;AAAA,EAClB;AAAA,EACD,gBAAgB;AACd,QAAI,KAAK,WAAW,CAAC,KAAK,SAAS;AACjC,WAAK;AACL,WAAK,aAAY;AAAA,IACnB;AAAA,EACD;AAAA,EACD,SAAS;AAAA,IACP,MAAM,eAAe;AACnB,WAAK,UAAU;AACf,UAAI;AACF,cAAM,MAAM,MAAMC,wBAAY;AAAA,UAC5B,MAAM,KAAK;AAAA,UACX,OAAO,KAAK;AAAA,UACZ,QAAQ,KAAK;AAAA,QACf,CAAC;AACD,YAAI,KAAK,SAAS,GAAG;AACnB,eAAK,WAAW,IAAI;AAAA,eACf;AACL,eAAK,WAAW,CAAC,GAAG,KAAK,UAAU,GAAG,IAAI,IAAI;AAAA,QAChD;AACA,aAAK,UAAU,KAAK,SAAS,SAAS,IAAI,WAAW;AAAA,MACrD,SAAO,OAAO;AACdC,sBAAAA,MAAc,MAAA,SAAA,+BAAA,KAAK;AAAA,MACrB,UAAU;AACR,aAAK,UAAU;AAAA,MACjB;AAAA,IACD;AAAA,IACD,WAAW;AACT,WAAK,OAAO;AACZ,WAAK,UAAU;AACf,WAAK,aAAY;AAAA,IAClB;AAAA,IACD,WAAW,IAAI;AACbA,oBAAG,MAAC,WAAW,EAAE,KAAK,4BAA4B,EAAE,GAAG,CAAC;AAAA,IAC1D;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;ACzEA,GAAG,WAAW,eAAe;"}