{"version":3,"file":"login.js","sources":["pages/login/login.vue","../../../application/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbG9naW4vbG9naW4udnVl"],"sourcesContent":["<template>\r\n  <view class=\"container\">\r\n    <view class=\"title\">欢迎登录</view>\r\n    <view class=\"form-item\">\r\n      <input class=\"input\" v-model=\"username\" placeholder=\"请输入用户名\" />\r\n    </view>\r\n    <view class=\"form-item\">\r\n      <input class=\"input\" type=\"password\" v-model=\"password\" placeholder=\"请输入密码\" />\r\n    </view>\r\n    <button class=\"btn\" @click=\"handleLogin\">登录</button>\r\n    <view class=\"link\" @click=\"goToRegister\">没有账号？去注册</view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { login } from '@/api/auth';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      username: '',\r\n      password: ''\r\n    };\r\n  },\r\n  methods: {\r\n    async handleLogin() {\r\n      if (!this.username || !this.password) {\r\n        uni.showToast({ title: '请填写完整', icon: 'none' });\r\n        return;\r\n      }\r\n      try {\r\n        const res = await login({ username: this.username, password: this.password });\r\n        uni.setStorageSync('token', res.token);\r\n        uni.setStorageSync('user', res.user);\r\n        uni.showToast({ title: '登录成功' });\r\n        \r\n        // 调用 App.vue 的方法更新 tabBar\r\n        const app = getApp();\r\n        app.checkLoginStatus();\r\n        \r\n        setTimeout(() => {\r\n          uni.switchTab({ url: '/pages/index/index' });\r\n        }, 1500);\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    },\r\n    goToRegister() {\r\n      uni.navigateTo({ url: '/pages/register/register' });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n.container { padding: 50px 20px; }\r\n.title { font-size: 24px; font-weight: bold; margin-bottom: 30px; text-align: center; }\r\n.form-item { margin-bottom: 20px; border-bottom: 1px solid #eee; padding: 10px 0; }\r\n.input { width: 100%; }\r\n.btn { background-color: #3cc51f; color: #fff; margin-top: 30px; }\r\n.link { text-align: center; margin-top: 20px; color: #666; font-size: 14px; }\r\n</style>\r\n","import MiniProgramPage from 'D:/projects/my_shop/shop_app/pages/login/login.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","login"],"mappings":";;;AAiBA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,UAAU;AAAA,MACV,UAAU;AAAA;EAEb;AAAA,EACD,SAAS;AAAA,IACP,MAAM,cAAc;AAClB,UAAI,CAAC,KAAK,YAAY,CAAC,KAAK,UAAU;AACpCA,sBAAG,MAAC,UAAU,EAAE,OAAO,SAAS,MAAM,OAAK,CAAG;AAC9C;AAAA,MACF;AACA,UAAI;AACF,cAAM,MAAM,MAAMC,eAAM,EAAE,UAAU,KAAK,UAAU,UAAU,KAAK,SAAO,CAAG;AAC5ED,sBAAAA,MAAI,eAAe,SAAS,IAAI,KAAK;AACrCA,sBAAAA,MAAI,eAAe,QAAQ,IAAI,IAAI;AACnCA,sBAAAA,MAAI,UAAU,EAAE,OAAO,OAAQ,CAAA;AAG/B,cAAM,MAAM;AACZ,YAAI,iBAAgB;AAEpB,mBAAW,MAAM;AACfA,wBAAAA,MAAI,UAAU,EAAE,KAAK,qBAAsB,CAAA;AAAA,QAC5C,GAAE,IAAI;AAAA,MACP,SAAO,OAAO;AACdA,sBAAAA,MAAc,MAAA,SAAA,+BAAA,KAAK;AAAA,MACrB;AAAA,IACD;AAAA,IACD,eAAe;AACbA,oBAAAA,MAAI,WAAW,EAAE,KAAK,2BAA4B,CAAA;AAAA,IACpD;AAAA,EACF;AACF;;;;;;;;;;;;AClDA,GAAG,WAAW,eAAe;"}