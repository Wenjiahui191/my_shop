{"version":3,"file":"user.js","sources":["pages/user/user.vue","../../../application/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvdXNlci91c2VyLnZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"container\">\r\n    <view class=\"user-info\" v-if=\"user\">\r\n      <image class=\"avatar\" src=\"/static/logo.png\"></image>\r\n      <view class=\"info\">\r\n        <view class=\"nickname\">{{ user.nickname || user.username }}</view>\r\n        <view class=\"phone\">{{ user.phone }}</view>\r\n      </view>\r\n    </view>\r\n    <view class=\"user-info\" v-else @click=\"goToLogin\">\r\n      <image class=\"avatar\" src=\"/static/logo.png\"></image>\r\n      <view class=\"info\">\r\n        <view class=\"nickname\">点击登录</view>\r\n      </view>\r\n    </view>\r\n\r\n    <view class=\"menu-list\">\r\n      <view class=\"menu-item\" @click=\"goToOrders\" v-if=\"user\">\r\n        <text>我的订单</text>\r\n        <text class=\"arrow\">></text>\r\n      </view>\r\n      <view class=\"menu-item\" @click=\"goToAddresses\" v-if=\"user\">\r\n        <text>收货地址管理</text>\r\n        <text class=\"arrow\">></text>\r\n      </view>\r\n      <view class=\"menu-item\" @click=\"logout\" v-if=\"user\">\r\n        <text>退出登录</text>\r\n        <text class=\"arrow\">></text>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      user: null\r\n    };\r\n  },\r\n  onShow() {\r\n    this.user = uni.getStorageSync('user');\r\n  },\r\n  methods: {\r\n    goToLogin() {\r\n      uni.navigateTo({ url: '/pages/login/login' });\r\n    },\r\n    goToOrders() {\r\n      uni.navigateTo({ url: '/pages/order/list' });\r\n    },\r\n    goToAddresses() {\r\n      uni.navigateTo({ url: '/pages/address/list' });\r\n    },\r\n    logout() {\r\n      uni.removeStorageSync('token');\r\n      uni.removeStorageSync('user');\r\n      this.user = null;\r\n      uni.showToast({ title: '已退出' });\r\n      \r\n      // 调用 App.vue 的方法更新 tabBar\r\n      const app = getApp();\r\n      app.checkLoginStatus();\r\n      \r\n      setTimeout(() => {\r\n          uni.reLaunch({ url: '/pages/index/index' });\r\n      }, 1000);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n.container { min-height: 100vh; background-color: #f8f8f8; }\r\n.user-info { display: flex; align-items: center; padding: 30px 20px; background-color: #3cc51f; color: #fff; }\r\n.avatar { width: 60px; height: 60px; border-radius: 50%; margin-right: 15px; background-color: #fff; }\r\n.nickname { font-size: 18px; font-weight: bold; margin-bottom: 5px; }\r\n.phone { font-size: 14px; opacity: 0.8; }\r\n.menu-list { margin-top: 10px; background-color: #fff; }\r\n.menu-item { display: flex; justify-content: space-between; padding: 15px; border-bottom: 1px solid #eee; font-size: 16px; }\r\n.arrow { color: #ccc; }\r\n</style>\r\n","import MiniProgramPage from 'D:/projects/my_shop/shop_app/pages/user/user.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;;AAkCA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,MAAM;AAAA;EAET;AAAA,EACD,SAAS;AACP,SAAK,OAAOA,cAAAA,MAAI,eAAe,MAAM;AAAA,EACtC;AAAA,EACD,SAAS;AAAA,IACP,YAAY;AACVA,oBAAAA,MAAI,WAAW,EAAE,KAAK,qBAAsB,CAAA;AAAA,IAC7C;AAAA,IACD,aAAa;AACXA,oBAAAA,MAAI,WAAW,EAAE,KAAK,oBAAqB,CAAA;AAAA,IAC5C;AAAA,IACD,gBAAgB;AACdA,oBAAAA,MAAI,WAAW,EAAE,KAAK,sBAAuB,CAAA;AAAA,IAC9C;AAAA,IACD,SAAS;AACPA,0BAAI,kBAAkB,OAAO;AAC7BA,0BAAI,kBAAkB,MAAM;AAC5B,WAAK,OAAO;AACZA,oBAAAA,MAAI,UAAU,EAAE,OAAO,MAAO,CAAA;AAG9B,YAAM,MAAM;AACZ,UAAI,iBAAgB;AAEpB,iBAAW,MAAM;AACbA,sBAAAA,MAAI,SAAS,EAAE,KAAK,qBAAsB,CAAA;AAAA,MAC7C,GAAE,GAAI;AAAA,IACT;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;ACnEA,GAAG,WAAW,eAAe;"}