{"version":3,"file":"detail.js","sources":["pages/product/detail.vue","../../../application/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcHJvZHVjdC9kZXRhaWwudnVl"],"sourcesContent":["<template>\r\n  <view class=\"container\" v-if=\"product\">\r\n    <image class=\"product-img\" :src=\"filePath + (product.image_url || '/uploads/logo.png')\" mode=\"aspectFill\"></image>\r\n    <view class=\"product-info\">\r\n      <view class=\"product-price\">¥{{ product.price }}</view>\r\n      <view class=\"product-name\">{{ product.name }}</view>\r\n      <view class=\"product-desc\">{{ product.description }}</view>\r\n      <view class=\"product-stock\">库存: {{ product.stock }}</view>\r\n    </view>\r\n    <view class=\"footer\">\r\n      <view class=\"btn cart-btn\" @click=\"addToCart\">加入购物车</view>\r\n      <view class=\"btn buy-btn\" @click=\"buyNow\">立即购买</view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { getProductById } from '@/api/product';\r\nimport { addToCart } from '@/api/cart';\r\nimport { filePath } from '@/utils/request';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      product: null,\r\n      filePath\r\n    };\r\n  },\r\n  onLoad(options) {\r\n    if (options.id) {\r\n      this.loadProduct(options.id);\r\n    }\r\n  },\r\n  methods: {\r\n    async loadProduct(id) {\r\n      try {\r\n        const res = await getProductById(id);\r\n        this.product = res.data;\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    },\r\n    async addToCart() {\r\n      try {\r\n        await addToCart({ product_id: this.product.id, quantity: 1 });\r\n        uni.showToast({ title: '已加入购物车' });\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    },\r\n    buyNow() {\r\n      // Simplified: Add to cart then go to cart\r\n      this.addToCart().then(() => {\r\n        uni.switchTab({ url: '/pages/cart/cart' });\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n.container { padding-bottom: 60px; }\r\n.product-img { width: 100%; height: 300px; }\r\n.product-info { padding: 15px; background-color: #fff; }\r\n.product-price { color: #ff0000; font-size: 24px; font-weight: bold; margin-bottom: 10px; }\r\n.product-name { font-size: 18px; font-weight: bold; margin-bottom: 10px; }\r\n.product-desc { color: #666; font-size: 14px; margin-bottom: 10px; }\r\n.product-stock { color: #999; font-size: 12px; }\r\n.footer { position: fixed; bottom: 0; left: 0; right: 0; display: flex; height: 50px; background-color: #fff; border-top: 1px solid #eee; }\r\n.btn { flex: 1; display: flex; align-items: center; justify-content: center; color: #fff; font-size: 16px; }\r\n.cart-btn { background-color: #ff9900; }\r\n.buy-btn { background-color: #ff0000; }\r\n</style>\r\n","import MiniProgramPage from 'D:/projects/my_shop/shop_app/pages/product/detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["filePath","getProductById","uni","addToCart"],"mappings":";;;;;AAqBA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,SAAS;AAAA,MACT,UAAAA,cAAO;AAAA;EAEV;AAAA,EACD,OAAO,SAAS;AACd,QAAI,QAAQ,IAAI;AACd,WAAK,YAAY,QAAQ,EAAE;AAAA,IAC7B;AAAA,EACD;AAAA,EACD,SAAS;AAAA,IACP,MAAM,YAAY,IAAI;AACpB,UAAI;AACF,cAAM,MAAM,MAAMC,2BAAe,EAAE;AACnC,aAAK,UAAU,IAAI;AAAA,MACnB,SAAO,OAAO;AACdC,sBAAAA,MAAc,MAAA,SAAA,kCAAA,KAAK;AAAA,MACrB;AAAA,IACD;AAAA,IACD,MAAM,YAAY;AAChB,UAAI;AACF,cAAMC,SAAS,UAAC,EAAE,YAAY,KAAK,QAAQ,IAAI,UAAU,EAAE,CAAC;AAC5DD,sBAAAA,MAAI,UAAU,EAAE,OAAO,SAAU,CAAA;AAAA,MACjC,SAAO,OAAO;AACdA,sBAAAA,MAAc,MAAA,SAAA,kCAAA,KAAK;AAAA,MACrB;AAAA,IACD;AAAA,IACD,SAAS;AAEP,WAAK,YAAY,KAAK,MAAM;AAC1BA,sBAAAA,MAAI,UAAU,EAAE,KAAK,mBAAoB,CAAA;AAAA,MAC3C,CAAC;AAAA,IACH;AAAA,EACF;AACF;;;;;;;;;;;;;;;ACxDA,GAAG,WAAW,eAAe;"}